.. _rm-compare-converted-queries

=========================
Compare Converted Queries
=========================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

You can use the query converter test bench to compare SQL queries
and converted MongoDB queries inside of Relational Migrator. 
Query converter test bench can help you verify the accuracy 
of each converted query.

Before You Begin
----------------

- Before you can use the query converter test bench, you must 
  sign in to your Atlas account in Relational Migrator. For 
  details, see :ref:`rm-atlas-log-in`.

- For details on how to turn on query converter,  see 
  :ref:`rm-enable-query-converter`.

- `Install Docker <https://www.docker.com/>`.

- In order for Relational Migrator to convert your queries, 
  you must be running the language converter runtime. The 
  language converter runtime is a Docker container that runs
  serveral endpoints for language conversion on port ``6080``. 
  This process contains the logic and language runtimes to 
  run source and destination queries. 

Steps
-----

.. procedure::
   :style: normal

   .. step:: Start the Relational Migrator Query Runner

      The Query Runner is a Docker container that runs custom REST endpoints.
      These endpoints are used to convert and run queries.
   
      .. code-block::

         docker run --name relational-migrator-query-runner -p 6080:6080 public.ecr.aws/v4d7k6c9/relational-migrator-query-runner

   .. step:: Navigate to the query converter pane

      From the :guilabel:`Code Generation` tab, click the 
      :guilabel:`Query Converter` pane.

   .. step:: Open the query test bench console

      Click the :icon-lg:`ChevronUp` on the :guilabel:`Test Queries`
      pane.

   .. step:: Run the source query

      a. On the :guilabel:`Test Queries`
         pane, click :guilabel:`Run Source Query` button.

      #. Enter the connection details to your database.

      #. Click :guilabel:`Run` on the 
         :guilabel:`Connection Details` form.
      
   .. step:: Run the converted query

      a. On the :guilabel:`Test Queries`
         pane, click :guilabel:`Run Converted Query` button.

      #. Enter the connection details to your database.

      #. Click :guilabel:`Run` on the 
         :guilabel:`Connection Details` form.

   .. step:: Navigate to the query converter pane


   
Learn More
----------

- :ref:`rm-convert-queries`
- :ref:`rm-convert-views`
- :ref:`rm-convert-stored-procedures`
