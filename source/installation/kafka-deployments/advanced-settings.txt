.. _advanced-settings:

=======================
Advanced Kafka Settings
=======================

.. default-domain:: mongodb

.. facet::
   :name: genre
   :values: reference

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

When you integrate {+rel-mig+} with Kafka, you can configure 
more advanced settings by updating your ``user.properties`` file.
Your ``user.properties`` file is located in an OS specific location. For more 
information, see :ref:`{+rel-mig+} File Locations <file-location>`.

.. _rm-user-properties:

User Properties
---------------

Provide optional configuration settings by updating your ``user.properties`` file. 

.. include:: /includes/table-user-properties.rst

Schema Registry Properties
--------------------------

Use {+rel-mig+} with any schema registry by adding properties to the ``user.properties`` 
file with the prefix ``migrator.connector.properties.common``.

.. glossary::

   ``migrator.connector.properties.common.key.converter``
    *Default*: ``migrator.connector.properties.common.key.converter``
    
    The convertor class for the message key.

   ``migrator.connector.properties.common.value.converter``
    *Default*: ``org.apache.kafka.connect.json.JsonConverter``
    
    The convertor class for the message value.

   ``migrator.connector.properties.common.key.converter.apicurio.registry.url``
    This specifies the URL of the Apicurio Registry for the key converter.

    It uses the ``http://{host}:{port}`` or ``https://{host}:{port}`` format.

   ``migrator.connector.properties.common.value.converter.apicurio.registry.url``
    This specifies the URL of the Apicurio Registry for the value converter.

    It uses the ``http://{host}:{port}`` or ``https://{host}:{port}`` format.

Source Connector Properties
---------------------------

{+rel-mig+} sets default `Debezium source connector properties 
<https://debezium.io/documentation/reference/stable/connectors/mysql.html#mysql-connector-properties>`__
for each supported source database. The connector properties can be 
overridden by adding them in the ``user.properties`` file with the prefix 
``migrator.connector.source.common``. For example: 

.. code-block::

   migrator.connector.source.common.errors.max.retries: 0

In this example, the default value is five but it has now been set to zero. This means
there is no retries after a retriable failure.

Sink Connector Properties
-------------------------

{+rel-mig+} sets default Migrator `sink connector properties 
<https://docs.confluent.io/platform/current/installation/configuration/connect/sink-connect-configs.html>`__
for each supported source database. The connector properties can be 
overridden by adding them in the ``user.properties`` file with the prefix 
``migrator.connector.sink.common``. For example:

.. code-block::

   migrator.connector.sink.common.errors.max.retries: 0

In this example, the default value is five but it has now been set to zero. This means
there are no retries.